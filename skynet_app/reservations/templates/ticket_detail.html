{% extends "home/base.html" %}
{% block content %}

<h2>Detalle del Ticket</h2>

<div class="card mb-4 shadow">
  <div class="card-header bg-success text-white">
    <strong>Ticket:</strong> {{ ticket.barcode }} —
    <strong>Estado:</strong> {{ ticket.status }} —
    <strong>Emitido:</strong> {{ ticket.issued_at }}
  </div>
  <div class="card-body">
    <h5 class="mb-3">Información del Pasajero</h5>
    <p><strong>Nombre:</strong> {{ passenger.name }}</p>
    <p><strong>Documento:</strong> {{ passenger.document }}</p>
    <p><strong>Email:</strong> {{ passenger.email }}</p>
    <p><strong>Teléfono:</strong> {{ passenger.phone }}</p>
    <p><strong>Fecha de nacimiento:</strong> {{ passenger.birth_date }}</p>

    <hr>
    <h5>Vuelos asignados</h5>
    <ul class="list-group">
      {% for f in flights %}
        <li class="list-group-item">
          <strong>{{ f.origin }} → {{ f.destination }}</strong><br>
          <small>Vuelo: {{ f.flight_number }} — Salida: {{ f.departure }} — Llegada: {{ f.arrival }}</small><br>
          <small>Duración: {{ f.duration }} min — Asiento: {{ f.seat }}</small><br>
          <small>Precio: ${{ f.price }}</small>
        </li>
      {% endfor %}
    </ul>

    <p class="mt-3"><strong>Precio total:</strong> ${{ total_price }}</p>
    {# <a href="{% url 'download_ticket_pdf' ticket.id %}" class="btn btn-primary">Descargar PDF</a> #}

      Descargar PDF
    </a>
  </div>
</div>

{% endblock %}
