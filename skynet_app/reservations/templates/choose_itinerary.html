{% extends "home/base.html" %}
{% block content %}
<h2>Opciones de Itinerario</h2>

<p><strong>Origen:</strong> {{ origin }}</p>
<p><strong>Destino:</strong> {{ destination }}</p>
<p><strong>Fecha:</strong> {{ date }}</p>
<p><strong>Pasajeros:</strong> {{ passengers }}</p>

<p><strong>Rutas encontradas:</strong></p>

{% if itineraries %}
  <form method="post" action="{% url 'select_itinerary' %}">
    {% csrf_token %}
    {% for itin in itineraries %}
      <div style="border: 1px solid #ccc; padding: 15px; margin: 15px 0; border-radius: 5px;">
        <p><strong>Ruta:</strong> {{ itin.route_summary }}</p>
        <p><strong>Duración:</strong> {{ itin.duration }} minutos</p>
        <p><strong>Precio Total:</strong> ${{ itin.total_price }}</p>

        {% with forloop.counter0 as idx %}
          {% for rid in route_options.idx %}
            <input type="hidden" name="routes_{{ idx }}" value="{{ rid }}">
          {% endfor %}
          <button type="submit" name="option_idx" value="{{ idx }}">Seleccionar este itinerario</button>
        {% endwith %}
      </div>
    {% endfor %}
  </form>
{% else %}
  <p>No se encontraron rutas disponibles para los parámetros indicados.</p>
{% endif %}

{% endblock %}
